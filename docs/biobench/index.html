<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.1">
<title>biobench API documentation</title>
<meta name="description" content="Package for organizing all the code to run benchmarks …">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });</script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Package <code>biobench</code></h1>
</header>
<section id="section-intro">
<p>Package for organizing all the code to run benchmarks.</p>
<p>Submodules are either tasks or helpers for organizing code.</p>
<p>The most important modules to understand are:</p>
<ul>
<li><code><a title="benchmark" href="../benchmark.html">benchmark</a></code> because it is the launch script that runs all the tasks.</li>
<li><code><a title="biobench.interfaces" href="interfaces.html">biobench.interfaces</a></code> because it defines how everything hooks together.</li>
<li>Any of the task modules&ndash;<code><a title="biobench.newt" href="newt/index.html">biobench.newt</a></code> is well documented.</li>
<li>Any of the vision modules&ndash;<code><a title="biobench.third_party_models.OpenClip" href="third_party_models.html#biobench.third_party_models.OpenClip">OpenClip</a></code> is highly relevant to anyone using the <a href="https://github.com/mlfoundations/open_clip">open_clip</a> codebase to train models.</li>
</ul>
<h2 id="task-modules">Task Modules</h2>
<ul>
<li><code><a title="biobench.ages" href="ages/index.html">biobench.ages</a></code>: Classify images of juvenile birds using only adult birds for training.</li>
<li><code><a title="biobench.beluga" href="beluga/index.html">biobench.beluga</a></code>: Re-identification of Beluga whales using nearest neighbors.</li>
<li><code><a title="biobench.birds525" href="birds525/index.html">biobench.birds525</a></code>: 1-shot classification with nearest-neighbor of the Kaggle Birds dataset.</li>
<li><code><a title="biobench.fishnet" href="fishnet/index.html">biobench.fishnet</a></code>: Predict presense/absence of 9 different traits in images of fish.</li>
<li><code><a title="biobench.iwildcam" href="iwildcam/index.html">biobench.iwildcam</a></code>: Species classification using multiclass linear regression.</li>
<li><code><a title="biobench.kabr" href="kabr/index.html">biobench.kabr</a></code>: Behavior classification of single-subject animals using simpleshot of mean frame representations.</li>
<li><code><a title="biobench.newt" href="newt/index.html">biobench.newt</a></code>: 164 binary classification tasks using an binary SVM trained on image features.</li>
<li><code><a title="biobench.plantnet" href="plantnet/index.html">biobench.plantnet</a></code>:</li>
<li><code><a title="biobench.plankton" href="plankton/index.html">biobench.plankton</a></code>: classification of microscopic images of phytoplankton.</li>
</ul>
<h2 id="helper-modules">Helper Modules</h2>
<ul>
<li><code><a title="biobench.interfaces" href="interfaces.html">biobench.interfaces</a></code>: All the interfaces that describe how the different modules communicate.</li>
<li><code><a title="biobench.registry" href="registry.html">biobench.registry</a></code>: How to add/load vision models to BioBench.</li>
<li><code><a title="biobench.simpleshot" href="simpleshot.html">biobench.simpleshot</a></code>: An implementation of nearest-centroid classification from <a href="https://arxiv.org/abs/1911.04623">Simpleshot</a>.</li>
<li><code><a title="biobench.third_party_models" href="third_party_models.html">biobench.third_party_models</a></code>: Some pre-written vision backbones that load checkpoints from <a href="https://github.com/mlfoundations/open_clip">open_clip</a> and <a href="https://github.com/huggingface/pytorch-image-models">timm</a>. You can use these as inspiration for writing your own vision backbones or check out <code><a title="biobench.registry" href="registry.html">biobench.registry</a></code> for a tutorial.</li>
</ul>
<h2 id="future-tasks">Future Tasks</h2>
<p>These are tasks that I plan on adding but are not yet done.</p>
<ul>
<li><code><a title="biobench.rarespecies" href="rarespecies/index.html">biobench.rarespecies</a></code>: Waiting on a <a href="https://huggingface.co/datasets/imageomics/rare-species/discussions/8">bug</a> in Huggingface's datasets library.</li>
<li><a href="https://github.com/Imageomics/Fish-Vista">FishVista</a>: I want to add trait classification: given patch-level features, can we train a linear probe to predict the presence/absense of a feature?</li>
</ul>
<h1 id="confidence-intervals">Confidence Intervals</h1>
<p>Recommended Reading:</p>
<ul>
<li><a href="https://sebastianraschka.com/blog/2022/confidence-intervals-for-ml.html">Sebastian Raschka's blogpost on confidence intervals for ML</a></li>
</ul>
<h2 id="biobench-confidence-intervals">BioBench Confidence Intervals</h2>
<p>We resample from the test predictions $N$ times.
Then we re-calculate the statistic of interest (typically just mean accuracy) for each resampling.
Over $N$ re-samples, we collect a distribution of possible mean accuracies.
Then, if we repeated this process 100 times, we could assume that in 95 of the cases, the true mean accuracy is in the sampled confidence interval.</p>
<blockquote>
<p>For me personally, this is pretty convoluted logic.
I just assume that my true mean is 95% likely to be in my confidence interval.<sup id="fnref:wrong"><a class="footnote-ref" href="#fn:wrong">1</a></sup></p>
</blockquote>
<p>In practice, we use $N = 500$.</p>
<h2 id="note-on-confidence-interval-types">Note on Confidence Interval Types</h2>
<p>For different tasks, we <em>could</em> use different kinds of bootstrapping.
Non-parametric methods like nearest centroid classifiers or KNN are particularly easy to re-evaluate and so we could bootstrap the entire process.
Parametric methods like linear classifiers or SVMs are slow to train, so we don't want to repeat the training step 200+ times.</p>
<p>In practice, however, we simply bootstrap test set predictions because it can be cheaply applied to all benchmarks regardless of training or inference cost.
It requires only that we have a $N$-dimensional vector of scores, where $N$ is the number of test examples, which is always under 10M, so at most a 40MB vector.</p>
<h2 id="discussion-of-task-importance">Discussion of Task Importance</h2>
<p>(TODO)</p>
<p>Main points:</p>
<ul>
<li>Some tasks are real tasks (KABR, Beluga).</li>
<li>Others are made up (Birds525, RareSpecies).</li>
<li>Some are in-between (NeWT, FishNet).</li>
<li>Some are made up and we hypothesize that they predict performance on real tasks (ImageNet-1K, iNat2021).</li>
<li>Likely, the real tasks are most important, but they are also the most specialized (and thus least likely to predict performance on other tasks).</li>
<li>We don't know if ImageNet-1K or iNat2021 still predict performance on real, specialized tasks. They definitely did 2-5 years ago&mdash;is that still true with new models?</li>
</ul>
<div class="footnote">
<hr>
<ol>
<li id="fn:wrong">
<p>I know this is wrong. I know. You don't need to tell me. I know it's wrong. But it's way freakin' easier to reason about and it's only subtley wrong and it's still better than just a mean. I know it's wrong. I know.&#160;<a class="footnote-backref" href="#fnref:wrong" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
</section>
<section>
<h2 class="section-title" id="header-submodules">Sub-modules</h2>
<dl>
<dt><code class="name"><a title="biobench.ages" href="ages/index.html">biobench.ages</a></code></dt>
<dd>
<div class="desc"><p>This task measures changes in performance with respect to the stage of life of a bird.
Specifically, we measure classification accuracy among 11 …</p></div>
</dd>
<dt><code class="name"><a title="biobench.beluga" href="beluga/index.html">biobench.beluga</a></code></dt>
<dd>
<div class="desc"><p>Individual re-identification of Beluga whales (<em>Delphinapterus leucas</em>) using <a href="https://lila.science/datasets/beluga-id-2022/">this LILA BC dataset</a> …</p></div>
</dd>
<dt><code class="name"><a title="biobench.birds525" href="birds525/index.html">biobench.birds525</a></code></dt>
<dd>
<div class="desc"><p>Species classification of 525 different bird species; this dataset is from <a href="https://www.kaggle.com/datasets/gpiosenka/100-bird-species">Kaggle</a> …</p></div>
</dd>
<dt><code class="name"><a title="biobench.fishnet" href="fishnet/index.html">biobench.fishnet</a></code></dt>
<dd>
<div class="desc"><p>FishNet: Fish Recognition, Detection, and Functional Traits Prediction …</p></div>
</dd>
<dt><code class="name"><a title="biobench.helpers" href="helpers.html">biobench.helpers</a></code></dt>
<dd>
<div class="desc"><p>Useful helpers for more than two tasks that don't fit anywhere else.</p></div>
</dd>
<dt><code class="name"><a title="biobench.imagenet" href="imagenet/index.html">biobench.imagenet</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="biobench.inat21" href="inat21/index.html">biobench.inat21</a></code></dt>
<dd>
<div class="desc"><p>Trains a simple ridge regression classifier on visual representations for the iNat21 challenge.
In the challenge, there are 10K different species …</p></div>
</dd>
<dt><code class="name"><a title="biobench.interfaces" href="interfaces.html">biobench.interfaces</a></code></dt>
<dd>
<div class="desc"><p>Common interfaces for models and tasks so that it's easy to add new models (which will work right away with all tasks) and easy to add new tasks …</p></div>
</dd>
<dt><code class="name"><a title="biobench.iwildcam" href="iwildcam/index.html">biobench.iwildcam</a></code></dt>
<dd>
<div class="desc"><p>Fits a linear classifier that is trained using cross-entropy on the training set of iWildCam 2020.</p></div>
</dd>
<dt><code class="name"><a title="biobench.kabr" href="kabr/index.html">biobench.kabr</a></code></dt>
<dd>
<div class="desc"><p>Kenyan Animal Behavior Recognition (KABR) …</p></div>
</dd>
<dt><code class="name"><a title="biobench.newt" href="newt/index.html">biobench.newt</a></code></dt>
<dd>
<div class="desc"><p>NeWT: Natural World Tasks …</p></div>
</dd>
<dt><code class="name"><a title="biobench.plankton" href="plankton/index.html">biobench.plankton</a></code></dt>
<dd>
<div class="desc"><p>Classification of phytoplankton using ridge classifiers.
This task is particularly challenging because the image distribution is very different to …</p></div>
</dd>
<dt><code class="name"><a title="biobench.plantnet" href="plantnet/index.html">biobench.plantnet</a></code></dt>
<dd>
<div class="desc"><p>Pl@ntNet is a "dataset with high label ambiguity and a long-tailed distribution" from NeurIPS 2021.
We fit a ridge classifier from scikit-learn to a …</p></div>
</dd>
<dt><code class="name"><a title="biobench.rarespecies" href="rarespecies/index.html">biobench.rarespecies</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="biobench.registry" href="registry.html">biobench.registry</a></code></dt>
<dd>
<div class="desc"><p>Stores all vision backbones.
Users can register new custom backbones from their code to evaluate on biobench using <code><a title="biobench.register_vision_backbone" href="#biobench.register_vision_backbone">register_vision_backbone()</a></code>.
As long …</p></div>
</dd>
<dt><code class="name"><a title="biobench.simpleshot" href="simpleshot.html">biobench.simpleshot</a></code></dt>
<dd>
<div class="desc"><p>```
@article{wang2019simpleshot,
title={Simpleshot: Revisiting nearest-neighbor classification for few-shot learning},
author={Wang, Yan and Chao, …</p></div>
</dd>
<dt><code class="name"><a title="biobench.third_party_models" href="third_party_models.html">biobench.third_party_models</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="biobench.list_vision_backbones"><code class="name flex">
<span>def <span class="ident">list_vision_backbones</span></span>(<span>) ‑> list[str]</span>
</code></dt>
<dd>
<div class="desc"><p>List all vision backbone model orgs.</p></div>
</dd>
<dt id="biobench.load_vision_backbone"><code class="name flex">
<span>def <span class="ident">load_vision_backbone</span></span>(<span>model_org: str, ckpt: str) ‑> <a title="biobench.interfaces.VisionBackbone" href="interfaces.html#biobench.interfaces.VisionBackbone">VisionBackbone</a></span>
</code></dt>
<dd>
<div class="desc"><p>Load a pretrained vision backbone.</p></div>
</dd>
<dt id="biobench.register_vision_backbone"><code class="name flex">
<span>def <span class="ident">register_vision_backbone</span></span>(<span>model_org: str, cls: type[<a title="biobench.interfaces.VisionBackbone" href="interfaces.html#biobench.interfaces.VisionBackbone">VisionBackbone</a>])</span>
</code></dt>
<dd>
<div class="desc"><p>Register a new vision backbone class.</p></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul>
<li><a href="#task-modules">Task Modules</a></li>
<li><a href="#helper-modules">Helper Modules</a></li>
<li><a href="#future-tasks">Future Tasks</a></li>
<li><a href="#confidence-intervals">Confidence Intervals</a><ul>
<li><a href="#biobench-confidence-intervals">BioBench Confidence Intervals</a></li>
<li><a href="#note-on-confidence-interval-types">Note on Confidence Interval Types</a></li>
<li><a href="#discussion-of-task-importance">Discussion of Task Importance</a></li>
</ul>
</li>
</ul>
</div>
<ul id="index">
<li><h3><a href="#header-submodules">Sub-modules</a></h3>
<ul>
<li><code><a title="biobench.ages" href="ages/index.html">biobench.ages</a></code></li>
<li><code><a title="biobench.beluga" href="beluga/index.html">biobench.beluga</a></code></li>
<li><code><a title="biobench.birds525" href="birds525/index.html">biobench.birds525</a></code></li>
<li><code><a title="biobench.fishnet" href="fishnet/index.html">biobench.fishnet</a></code></li>
<li><code><a title="biobench.helpers" href="helpers.html">biobench.helpers</a></code></li>
<li><code><a title="biobench.imagenet" href="imagenet/index.html">biobench.imagenet</a></code></li>
<li><code><a title="biobench.inat21" href="inat21/index.html">biobench.inat21</a></code></li>
<li><code><a title="biobench.interfaces" href="interfaces.html">biobench.interfaces</a></code></li>
<li><code><a title="biobench.iwildcam" href="iwildcam/index.html">biobench.iwildcam</a></code></li>
<li><code><a title="biobench.kabr" href="kabr/index.html">biobench.kabr</a></code></li>
<li><code><a title="biobench.newt" href="newt/index.html">biobench.newt</a></code></li>
<li><code><a title="biobench.plankton" href="plankton/index.html">biobench.plankton</a></code></li>
<li><code><a title="biobench.plantnet" href="plantnet/index.html">biobench.plantnet</a></code></li>
<li><code><a title="biobench.rarespecies" href="rarespecies/index.html">biobench.rarespecies</a></code></li>
<li><code><a title="biobench.registry" href="registry.html">biobench.registry</a></code></li>
<li><code><a title="biobench.simpleshot" href="simpleshot.html">biobench.simpleshot</a></code></li>
<li><code><a title="biobench.third_party_models" href="third_party_models.html">biobench.third_party_models</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="biobench.list_vision_backbones" href="#biobench.list_vision_backbones">list_vision_backbones</a></code></li>
<li><code><a title="biobench.load_vision_backbone" href="#biobench.load_vision_backbone">load_vision_backbone</a></code></li>
<li><code><a title="biobench.register_vision_backbone" href="#biobench.register_vision_backbone">register_vision_backbone</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.1</a>.</p>
</footer>
</body>
</html>
